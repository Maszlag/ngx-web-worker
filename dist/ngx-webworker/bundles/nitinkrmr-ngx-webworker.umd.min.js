!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("@angular/core")):"function"==typeof define&&define.amd?define("@nitinkrmr/ngx-webworker",["exports","@angular/core"],r):r(((e=e||self).nitinkrmr=e.nitinkrmr||{},e.nitinkrmr["ngx-webworker"]={}),e.ng.core)}(this,(function(e,r){"use strict";var t=function(){function e(){this.workerFunctionToUrlMap=new WeakMap,this.promiseToWorkerMap=new WeakMap}return e.prototype.run=function(e,r,t){var o=this.getOrCreateWorkerUrl(e,t);return this.runUrl(o,r)},e.prototype.runUrl=function(e,r){var t=new Worker(e),o=this.createPromiseForWorker(t,r),n=this.createPromiseCleaner(o);return this.promiseToWorkerMap.set(o,t),o.then(n).catch(n),o},e.prototype.terminate=function(e){return this.removePromise(e)},e.prototype.getWorker=function(e){return this.promiseToWorkerMap.get(e)},e.prototype.createPromiseForWorker=function(e,r){return new Promise((function(t,o){e.addEventListener("message",(function(e){return t(e.data)})),e.addEventListener("error",o),e.postMessage(r)}))},e.prototype.getOrCreateWorkerUrl=function(e,r){if(!this.workerFunctionToUrlMap.has(e)){var t=this.createWorkerUrl(e,r);return this.workerFunctionToUrlMap.set(e,t),t}return this.workerFunctionToUrlMap.get(e)},e.prototype.createWorkerUrl=function(e,r){var t=e.toString(),o=new Blob(["\n      self.addEventListener('message', function(e) {\n        "+(r?"":"postMessage")+"(("+t+")(e.data));\n      });\n    "],{type:"text/javascript"});return URL.createObjectURL(o)},e.prototype.createPromiseCleaner=function(e){var r=this;return(function(t){return r.removePromise(e),t})},e.prototype.removePromise=function(e){var r=this.promiseToWorkerMap.get(e);return r&&r.terminate(),this.promiseToWorkerMap.delete(e),e},e.decorators=[{type:r.Injectable}],e}();e.WebworkerService=t,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=nitinkrmr-ngx-webworker.umd.min.js.map